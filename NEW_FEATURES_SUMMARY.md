# åŠŸèƒ½æ›´æ–°æ€»ç»“ / Feature Updates Summary

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. å¤šè§†é¢‘æºæ”¯æŒ âœ“

**YouTube è§†é¢‘** (åŸæœ‰åŠŸèƒ½)
- âœ“ æ”¯æŒ YouTube URL è§£æ
- âœ“ è‡ªåŠ¨è·å–è§†é¢‘ä¿¡æ¯å’Œå­—å¹•

**Bilibili è§†é¢‘** (æ–°å¢)
- âœ“ æ”¯æŒ Bilibili URL è§£æ (BV/AVæ ¼å¼)
- âœ“ è‡ªåŠ¨è·å–è§†é¢‘ä¿¡æ¯
- âœ“ è‡ªåŠ¨æå–å­—å¹•
- âœ“ API: `/api/bilibili/video-info`, `/api/bilibili/transcript`

**æœ¬åœ°è§†é¢‘** (æ–°å¢)
- âœ“ æ”¯æŒä¸Šä¼ è§†é¢‘æ–‡ä»¶ (MP4, WebM, OGG, MOV)
- âœ“ æ”¯æŒä¸Šä¼ å­—å¹•æ–‡ä»¶ (SRT, VTT)
- âœ“ å­—å¹•è§£æå™¨ (`lib/subtitle-parser.ts`)
- âœ“ è§†é¢‘å­˜å‚¨åˆ° Supabase Storage
- âœ“ API: `/api/local/upload-video`, `/api/local/upload-subtitle`
- âœ“ UI: `LocalVideoUpload` ç»„ä»¶
- âš ï¸ éœ€è¦ç”¨æˆ·ç™»å½•

### 2. è§†é¢‘åˆé›†åŠŸèƒ½ âœ“

**åˆé›†ç®¡ç†**
- âœ“ åˆ›å»º/ç¼–è¾‘/åˆ é™¤è§†é¢‘åˆé›†
- âœ“ æ·»åŠ è§†é¢‘åˆ°åˆé›†
- âœ“ ä»åˆé›†ç§»é™¤è§†é¢‘
- âœ“ åˆé›†åˆ—è¡¨é¡µé¢ (`/collections`)
- âœ“ åˆé›†è¯¦æƒ…é¡µé¢ (`/collections/[id]`)
- âœ“ æ•°æ®åº“è¡¨: `video_collections`, `collection_videos`
- âœ“ å®Œæ•´çš„ API ç«¯ç‚¹
- âœ“ è¡Œçº§å®‰å…¨ç­–ç•¥ (RLS)

### 3. å…¶ä»–æ”¹è¿› âœ“

- âœ“ æ›´æ–°ç±»å‹ç³»ç»Ÿ (`VideoSource`, `VideoCollection` ç­‰)
- âœ“ URL è¾“å…¥æ¡†æ”¯æŒ YouTube å’Œ Bilibili
- âœ“ ä¸»é¡µæ·»åŠ æ ‡ç­¾é¡µåˆ‡æ¢ (URL / æœ¬åœ°ä¸Šä¼ )
- âœ“ æ•°æ®åº“è¿ç§»è„šæœ¬
- âœ“ å®Œæ•´çš„ä¸­æ–‡æ–‡æ¡£ (`FEATURES_CN.md`)

---

## ğŸ“Š æŠ€æœ¯ç»†èŠ‚

### æ–°å¢æ–‡ä»¶
```
lib/
  â””â”€â”€ subtitle-parser.ts           # å­—å¹•è§£æå·¥å…·

app/api/
  â”œâ”€â”€ bilibili/
  â”‚   â”œâ”€â”€ video-info/route.ts     # Bilibili è§†é¢‘ä¿¡æ¯
  â”‚   â””â”€â”€ transcript/route.ts      # Bilibili å­—å¹•æå–
  â”œâ”€â”€ local/
  â”‚   â”œâ”€â”€ upload-video/route.ts   # æœ¬åœ°è§†é¢‘ä¸Šä¼ 
  â”‚   â””â”€â”€ upload-subtitle/route.ts # å­—å¹•æ–‡ä»¶ä¸Šä¼ 
  â””â”€â”€ collections/
      â”œâ”€â”€ route.ts                 # åˆé›† CRUD
      â”œâ”€â”€ [collectionId]/route.ts # å•ä¸ªåˆé›†
      â””â”€â”€ [collectionId]/videos/route.ts # åˆé›†è§†é¢‘ç®¡ç†

app/
  â””â”€â”€ collections/
      â”œâ”€â”€ page.tsx                 # åˆé›†åˆ—è¡¨
      â””â”€â”€ [collectionId]/page.tsx  # åˆé›†è¯¦æƒ…

components/
  â””â”€â”€ local-video-upload.tsx       # æœ¬åœ°ä¸Šä¼ ç»„ä»¶

supabase/migrations/
  â”œâ”€â”€ 20240101000000_add_collections.sql  # åˆé›†è¡¨
  â””â”€â”€ 20240101000001_add_videos_storage.sql # è§†é¢‘å­˜å‚¨
```

### ä¿®æ”¹æ–‡ä»¶
```
lib/
  â”œâ”€â”€ types.ts                     # æ–°å¢ç±»å‹å®šä¹‰
  â””â”€â”€ utils.ts                     # æ–°å¢å·¥å…·å‡½æ•°

app/
  â””â”€â”€ page.tsx                     # æ·»åŠ ä¸Šä¼ é€‰é¡¹

components/
  â””â”€â”€ url-input.tsx                # æ”¯æŒå¤šå¹³å°
```

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### ä½¿ç”¨ Bilibili è§†é¢‘
1. å¤åˆ¶ Bilibili è§†é¢‘é“¾æ¥
2. åœ¨ä¸»é¡µç²˜è´´é“¾æ¥
3. ç‚¹å‡»æäº¤è¿›è¡Œåˆ†æ

### ä¸Šä¼ æœ¬åœ°è§†é¢‘
1. ç¡®ä¿å·²ç™»å½•
2. åˆ‡æ¢åˆ° "Local Upload" æ ‡ç­¾
3. é€‰æ‹©è§†é¢‘å’Œå­—å¹•æ–‡ä»¶
4. å¡«å†™æ ‡é¢˜
5. ç‚¹å‡»ä¸Šä¼ 

### ç®¡ç†è§†é¢‘åˆé›†
1. è®¿é—® `/collections` é¡µé¢
2. åˆ›å»ºæ–°åˆé›†
3. åœ¨è§†é¢‘åˆ†æé¡µæ·»åŠ è§†é¢‘åˆ°åˆé›†
4. åœ¨åˆé›†è¯¦æƒ…é¡µç®¡ç†è§†é¢‘

---

## âš™ï¸ éƒ¨ç½²è¯´æ˜

### 1. æ•°æ®åº“è¿ç§»
åœ¨ Supabase SQL Editor ä¸­æ‰§è¡Œï¼š
```sql
-- æ‰§è¡Œè¿™ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹
supabase/migrations/20240101000000_add_collections.sql
supabase/migrations/20240101000001_add_videos_storage.sql
```

### 2. Supabase Storage
ç¡®ä¿ `videos` bucket å·²åˆ›å»ºå¹¶è®¾ç½®ä¸º public

### 3. ç¯å¢ƒå˜é‡
æ— éœ€æ–°å¢ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨ç°æœ‰é…ç½®å³å¯

---

## ğŸ“ å¾…åŠäº‹é¡¹

å½“å‰å®ç°å·²ç»å®Œæ•´ï¼Œåç»­å¯ä»¥è€ƒè™‘ï¼š

- [ ] æ‰¹é‡ä¸Šä¼ è§†é¢‘åˆ°åˆé›†
- [ ] åˆé›†åˆ†äº«åŠŸèƒ½
- [ ] è‡ªåŠ¨å­—å¹•ç”Ÿæˆï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰
- [ ] æ”¯æŒæ›´å¤šè§†é¢‘å¹³å°
- [ ] è§†é¢‘é¢„è§ˆå’Œå‰ªè¾‘åŠŸèƒ½

---

## ğŸ› å·²çŸ¥é—®é¢˜

- æ„å»ºæ—¶æœ‰ä¸€äº› ESLint è­¦å‘Šï¼ˆæœªä½¿ç”¨çš„å˜é‡ï¼‰ï¼Œä½†ä¸å½±å“åŠŸèƒ½
- Bilibili API å¯èƒ½å—åˆ°é€Ÿç‡é™åˆ¶
- æœ¬åœ°è§†é¢‘ä¸Šä¼ é™åˆ¶ä¸º 500MB

---

## ğŸ“ é—®é¢˜åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ– Pull Requestã€‚
